@model ecloning.Models.ladder
@{
    ViewBag.Title = "Delete Ladder";
    Layout = "~/Areas/Admin/Views/Shared/_BioToolsLayout.cshtml";
    var ladderSize = ViewBag.ladderSize;
    var id = "ladder-" + Model.id;
}

@Html.Partial("_BioTools")
<div id="page-wrapper">
    <span id="decodeIt" class="hidden"></span>
    <div class="row">
        <br />
        <div class="col-sm-6 col-sm-offset-4 col-xs-12">
            <div class="text-danger head3-size">Are you sure you want to delete this?</div>
        </div>
        <div class="col-sm-2 col-xs-12">
            <div>
                @using (Html.BeginForm())
            {
                    @Html.AntiForgeryToken()

                    <div class="form-actions no-color">
                        <input type="submit" value="Delete" class="btn btn-link" /> |
                        @Html.ActionLink("Back", "Details", new { type= Model.ladder_type}, new { @class = "btn btn-link" })
                    </div>
                }
            </div>
        </div>
    </div>
    <div>
        <hr/>
        <div class="col-xs-12 col-sm-12 col-md-6 col-lg-4">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <h3 class="panel-title text-center"><em><strong>@Model.name</strong></em></h3>
                </div>
                <div class="panel-body">
                    <div id="@id" class="inner"></div>
                </div>
            </div>
        </div>
    </div>
</div>

@Scripts.Render("~/bundles/jquery")
@Scripts.Render("~/bundles/d3")
<script src="~/Scripts/ecloning.js"></script>
<script>
    //get json data
    var ladders = ("@ladderSize");
    document.getElementById("decodeIt").innerHTML = ladders;
    ladders = document.getElementById("decodeIt").textContent;

    try
    {
        ladders = JSON.parse(ladders);
        //d3 nest by id
        var data = d3.nest()
                     .key(function (d) { return d.id; })
                     .entries(ladders);
        console.log(data);
        $.each(data, function (i, d) {
            var Rf = [];
            var size = [];
            var mass = [];
            $.each(d.values, function (si, sd) {
                Rf.push(sd.Rf); //Rf
                size.push(sd.size);
                mass.push(sd.mass);
            })
            //draw svg ladder
            //find the div id
            var id = "ladder-" + d.key;
            drawLadder(id, Rf, size, mass, d.values);
        })

    }
    catch (e)
    {
        console.log(e);
    }

</script>